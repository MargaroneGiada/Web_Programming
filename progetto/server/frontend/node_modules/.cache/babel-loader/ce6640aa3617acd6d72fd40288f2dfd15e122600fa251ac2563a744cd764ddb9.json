{"ast":null,"code":"var events = require('events');\nvar inherits = require('inherits');\nmodule.exports = LRU;\nfunction LRU(opts) {\n  if (!(this instanceof LRU)) return new LRU(opts);\n  if (typeof opts === 'number') opts = {\n    max: opts\n  };\n  if (!opts) opts = {};\n  events.EventEmitter.call(this);\n  this.cache = {};\n  this.head = this.tail = null;\n  this.length = 0;\n  this.max = opts.max || 1000;\n  this.maxAge = opts.maxAge || 0;\n}\ninherits(LRU, events.EventEmitter);\nObject.defineProperty(LRU.prototype, 'keys', {\n  get: function () {\n    return Object.keys(this.cache);\n  }\n});\nLRU.prototype.clear = function () {\n  this.cache = {};\n  this.head = this.tail = null;\n  this.length = 0;\n};\nLRU.prototype.remove = function (key) {\n  if (typeof key !== 'string') key = '' + key;\n  if (!this.cache.hasOwnProperty(key)) return;\n  var element = this.cache[key];\n  delete this.cache[key];\n  this._unlink(key, element.prev, element.next);\n  return element.value;\n};\nLRU.prototype._unlink = function (key, prev, next) {\n  this.length--;\n  if (this.length === 0) {\n    this.head = this.tail = null;\n  } else {\n    if (this.head === key) {\n      this.head = prev;\n      this.cache[this.head].next = null;\n    } else if (this.tail === key) {\n      this.tail = next;\n      this.cache[this.tail].prev = null;\n    } else {\n      this.cache[prev].next = next;\n      this.cache[next].prev = prev;\n    }\n  }\n};\nLRU.prototype.peek = function (key) {\n  if (!this.cache.hasOwnProperty(key)) return;\n  var element = this.cache[key];\n  if (!this._checkAge(key, element)) return;\n  return element.value;\n};\nLRU.prototype.set = function (key, value) {\n  if (typeof key !== 'string') key = '' + key;\n  var element;\n  if (this.cache.hasOwnProperty(key)) {\n    element = this.cache[key];\n    element.value = value;\n    if (this.maxAge) element.modified = Date.now();\n\n    // If it's already the head, there's nothing more to do:\n    if (key === this.head) return value;\n    this._unlink(key, element.prev, element.next);\n  } else {\n    element = {\n      value: value,\n      modified: 0,\n      next: null,\n      prev: null\n    };\n    if (this.maxAge) element.modified = Date.now();\n    this.cache[key] = element;\n\n    // Eviction is only possible if the key didn't already exist:\n    if (this.length === this.max) this.evict();\n  }\n  this.length++;\n  element.next = null;\n  element.prev = this.head;\n  if (this.head) this.cache[this.head].next = key;\n  this.head = key;\n  if (!this.tail) this.tail = key;\n  return value;\n};\nLRU.prototype._checkAge = function (key, element) {\n  if (this.maxAge && Date.now() - element.modified > this.maxAge) {\n    this.remove(key);\n    this.emit('evict', {\n      key: key,\n      value: element.value\n    });\n    return false;\n  }\n  return true;\n};\nLRU.prototype.get = function (key) {\n  if (typeof key !== 'string') key = '' + key;\n  if (!this.cache.hasOwnProperty(key)) return;\n  var element = this.cache[key];\n  if (!this._checkAge(key, element)) return;\n  if (this.head !== key) {\n    if (key === this.tail) {\n      this.tail = element.next;\n      this.cache[this.tail].prev = null;\n    } else {\n      // Set prev.next -> element.next:\n      this.cache[element.prev].next = element.next;\n    }\n\n    // Set element.next.prev -> element.prev:\n    this.cache[element.next].prev = element.prev;\n\n    // Element is the new head\n    this.cache[this.head].next = key;\n    element.prev = this.head;\n    element.next = null;\n    this.head = key;\n  }\n  return element.value;\n};\nLRU.prototype.evict = function () {\n  if (!this.tail) return;\n  var key = this.tail;\n  var value = this.remove(this.tail);\n  this.emit('evict', {\n    key: key,\n    value: value\n  });\n};","map":{"version":3,"names":["events","require","inherits","module","exports","LRU","opts","max","EventEmitter","call","cache","head","tail","length","maxAge","Object","defineProperty","prototype","get","keys","clear","remove","key","hasOwnProperty","element","_unlink","prev","next","value","peek","_checkAge","set","modified","Date","now","evict","emit"],"sources":["/media/giada/OS/Users/Asus/OneDrive - Università degli Studi di Catania/_Università/Web Programming/Progetto/progetto/client/node_modules/lru/index.js"],"sourcesContent":["var events = require('events')\nvar inherits = require('inherits')\n\nmodule.exports = LRU\n\nfunction LRU (opts) {\n  if (!(this instanceof LRU)) return new LRU(opts)\n  if (typeof opts === 'number') opts = {max: opts}\n  if (!opts) opts = {}\n  events.EventEmitter.call(this)\n  this.cache = {}\n  this.head = this.tail = null\n  this.length = 0\n  this.max = opts.max || 1000\n  this.maxAge = opts.maxAge || 0\n}\n\ninherits(LRU, events.EventEmitter)\n\nObject.defineProperty(LRU.prototype, 'keys', {\n  get: function () { return Object.keys(this.cache) }\n})\n\nLRU.prototype.clear = function () {\n  this.cache = {}\n  this.head = this.tail = null\n  this.length = 0\n}\n\nLRU.prototype.remove = function (key) {\n  if (typeof key !== 'string') key = '' + key\n  if (!this.cache.hasOwnProperty(key)) return\n\n  var element = this.cache[key]\n  delete this.cache[key]\n  this._unlink(key, element.prev, element.next)\n  return element.value\n}\n\nLRU.prototype._unlink = function (key, prev, next) {\n  this.length--\n\n  if (this.length === 0) {\n    this.head = this.tail = null\n  } else {\n    if (this.head === key) {\n      this.head = prev\n      this.cache[this.head].next = null\n    } else if (this.tail === key) {\n      this.tail = next\n      this.cache[this.tail].prev = null\n    } else {\n      this.cache[prev].next = next\n      this.cache[next].prev = prev\n    }\n  }\n}\n\nLRU.prototype.peek = function (key) {\n  if (!this.cache.hasOwnProperty(key)) return\n\n  var element = this.cache[key]\n\n  if (!this._checkAge(key, element)) return\n  return element.value\n}\n\nLRU.prototype.set = function (key, value) {\n  if (typeof key !== 'string') key = '' + key\n\n  var element\n\n  if (this.cache.hasOwnProperty(key)) {\n    element = this.cache[key]\n    element.value = value\n    if (this.maxAge) element.modified = Date.now()\n\n    // If it's already the head, there's nothing more to do:\n    if (key === this.head) return value\n    this._unlink(key, element.prev, element.next)\n  } else {\n    element = {value: value, modified: 0, next: null, prev: null}\n    if (this.maxAge) element.modified = Date.now()\n    this.cache[key] = element\n\n    // Eviction is only possible if the key didn't already exist:\n    if (this.length === this.max) this.evict()\n  }\n\n  this.length++\n  element.next = null\n  element.prev = this.head\n\n  if (this.head) this.cache[this.head].next = key\n  this.head = key\n\n  if (!this.tail) this.tail = key\n  return value\n}\n\nLRU.prototype._checkAge = function (key, element) {\n  if (this.maxAge && (Date.now() - element.modified) > this.maxAge) {\n    this.remove(key)\n    this.emit('evict', {key: key, value: element.value})\n    return false\n  }\n  return true\n}\n\nLRU.prototype.get = function (key) {\n  if (typeof key !== 'string') key = '' + key\n  if (!this.cache.hasOwnProperty(key)) return\n\n  var element = this.cache[key]\n\n  if (!this._checkAge(key, element)) return\n\n  if (this.head !== key) {\n    if (key === this.tail) {\n      this.tail = element.next\n      this.cache[this.tail].prev = null\n    } else {\n      // Set prev.next -> element.next:\n      this.cache[element.prev].next = element.next\n    }\n\n    // Set element.next.prev -> element.prev:\n    this.cache[element.next].prev = element.prev\n\n    // Element is the new head\n    this.cache[this.head].next = key\n    element.prev = this.head\n    element.next = null\n    this.head = key\n  }\n\n  return element.value\n}\n\nLRU.prototype.evict = function () {\n  if (!this.tail) return\n  var key = this.tail\n  var value = this.remove(this.tail)\n  this.emit('evict', {key: key, value: value})\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}