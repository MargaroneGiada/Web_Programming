{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{GoogleMap,Marker,InfoWindow}from'@react-google-maps/api';import Navbar from'./Navbar';import Footer from'./Footer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const mapContainerStyle={height:'650px',width:'100%'};const center={lat:37.51136,lng:15.08709};function Mappa(){const[markers,setMarkers]=useState([]);const[selectedMarker,setSelectedMarker]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchMarkers=async()=>{try{const response=await axios.get('/api/events/markers',{headers:{authorization:sessionStorage.getItem('token')}});console.log('API Response:',response.data);setMarkers(response.data);}catch(error){console.error('Error fetching marker data:',error);}};fetchMarkers();},[]);const handleEventClick=eventId=>{navigate(`/evento?id=${eventId}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"Mappa justify-content-center fullpage\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"m-5 shadow map\",children:/*#__PURE__*/_jsxs(GoogleMap,{mapContainerStyle:mapContainerStyle,center:center,zoom:15,children:[markers.length>0&&markers.map((marker,index)=>/*#__PURE__*/_jsx(Marker,{position:{lat:marker.latitude,lng:marker.longitude},onClick:()=>setSelectedMarker(marker),icon:{url:'/assets/img/logoNuovo.png',// URL dell'icona\nscaledSize:new window.google.maps.Size(40,40)// Opzionale: dimensioni personalizzate dell'icona\n}},index)),selectedMarker&&/*#__PURE__*/_jsx(InfoWindow,{position:{lat:selectedMarker.latitude,lng:selectedMarker.longitude},onCloseClick:()=>setSelectedMarker(null),children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"a\",{onClick:()=>handleEventClick(selectedMarker._id),children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-primary fw-bold\",children:selectedMarker.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-dark\",children:selectedMarker.location}),/*#__PURE__*/_jsx(\"p\",{className:\"text-dark\",children:new Date(selectedMarker.date).toLocaleDateString('it-IT',{year:'numeric',month:'numeric',day:'numeric'})})]})})})]})}),/*#__PURE__*/_jsx(Footer,{})]});}export default Mappa;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","GoogleMap","Marker","InfoWindow","Navbar","Footer","jsx","_jsx","jsxs","_jsxs","mapContainerStyle","height","width","center","lat","lng","Mappa","markers","setMarkers","selectedMarker","setSelectedMarker","navigate","fetchMarkers","response","get","headers","authorization","sessionStorage","getItem","console","log","data","error","handleEventClick","eventId","className","children","zoom","length","map","marker","index","position","latitude","longitude","onClick","icon","url","scaledSize","window","google","maps","Size","onCloseClick","_id","name","location","Date","date","toLocaleDateString","year","month","day"],"sources":["/media/giada/OS/Users/Asus/OneDrive - Università degli Studi di Catania/_Università/Web Programming/Web_Programming/progetto/server/frontend/src/content/Mappa.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { GoogleMap, Marker, InfoWindow } from '@react-google-maps/api';\nimport Navbar from './Navbar';\nimport Footer from './Footer';\n\nconst mapContainerStyle = {\n    height: '650px',\n    width: '100%',\n};\n\nconst center = {\n    lat: 37.51136,\n    lng: 15.08709,\n};\n\nfunction Mappa() {\n    const [markers, setMarkers] = useState([]);\n    const [selectedMarker, setSelectedMarker] = useState(null);\n\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        const fetchMarkers = async () => {\n            try {\n                const response = await axios.get('/api/events/markers', {\n                    headers: { authorization: sessionStorage.getItem('token') }\n                });\n                console.log('API Response:', response.data);\n                setMarkers(response.data);\n            } catch (error) {\n                console.error('Error fetching marker data:', error);\n            }\n        };\n\n        fetchMarkers();\n    }, []);\n\n    const handleEventClick = (eventId) => {\n        navigate(`/evento?id=${eventId}`);\n    };\n\n    return (\n        <div className=\"Mappa justify-content-center fullpage\">\n            <Navbar />\n            <div className='m-5 shadow map'>\n                <GoogleMap\n                    mapContainerStyle={mapContainerStyle}\n                    center={center}\n                    zoom={15}\n                >\n                    {markers.length > 0 && markers.map((marker, index) => (\n                        <Marker\n                            key={index}\n                            position={{ lat: marker.latitude, lng: marker.longitude }}\n                            onClick={() => setSelectedMarker(marker)}\n                            icon={{\n                                url: '/assets/img/logoNuovo.png', // URL dell'icona\n                                scaledSize: new window.google.maps.Size(40, 40) // Opzionale: dimensioni personalizzate dell'icona\n                            }}\n                        />\n                    ))}\n\n                    {selectedMarker && (\n                        <InfoWindow\n                            position={{ lat: selectedMarker.latitude, lng: selectedMarker.longitude }}\n                            onCloseClick={() => setSelectedMarker(null)}\n                        >\n                            <div>\n                                <a onClick={() => handleEventClick(selectedMarker._id)}>\n                                    <h5 className='text-primary fw-bold'>{selectedMarker.name}</h5>\n                                    <p className='text-dark'>{selectedMarker.location}</p>\n                                    <p className='text-dark'>{new Date(selectedMarker.date).toLocaleDateString('it-IT', {\n                                                                year: 'numeric',\n                                                                month: 'numeric',\n                                                                day: 'numeric'\n                                                            })}</p>\n                                </a>\n                            </div>\n                        </InfoWindow>\n                    )}\n                </GoogleMap>\n            </div>\n\n            <Footer />\n        </div>\n    );\n}\n\nexport default Mappa;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}