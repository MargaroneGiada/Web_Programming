{"ast":null,"code":"import React,{useState,useRef}from'react';import{useLoadScript,Autocomplete}from'@react-google-maps/api';import{jsx as _jsx}from\"react/jsx-runtime\";const libraries=['places'];function LocationSearchInput(_ref){let{onSelect}=_ref;const{isLoaded,loadError}=useLoadScript({googleMapsApiKey:process.env.REACT_APP_KEY,libraries});const[address,setAddress]=useState('');const autocompleteRef=useRef(null);const onLoad=autocomplete=>{autocompleteRef.current=autocomplete;};const onPlaceChanged=()=>{if(autocompleteRef.current!==null){const place=autocompleteRef.current.getPlace();console.log('Place Object:',place);// Verifica che place e place.geometry esistano\nif(place&&place.geometry&&place.geometry.location){const location=place.geometry.location;setAddress(place.formatted_address);onSelect({location:place.formatted_address,latitude:location.lat(),longitude:location.lng()});}else{console.log('Place or place.geometry is not defined!');onSelect({location:'',latitude:'',longitude:''});return/*#__PURE__*/_jsx(\"div\",{children:\"Error founding place\"});}}else{console.log('Autocomplete is not loaded yet!');}};const handleKeyDown=e=>{if(e.key==='Enter'){e.preventDefault();// Previene l'invio del form con il tasto Invio\n}};if(loadError){return/*#__PURE__*/_jsx(\"div\",{children:\"Error loading maps\"});}if(!isLoaded){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading Maps...\"});}return/*#__PURE__*/_jsx(Autocomplete,{onLoad:onLoad,onPlaceChanged:onPlaceChanged,children:/*#__PURE__*/_jsx(\"input\",{id:\"place\",type:\"text\",placeholder:\"Cerca il luogo...\",value:address,onChange:e=>setAddress(e.target.value),onKeyDown:handleKeyDown,className:\"form-control\"})});}export default LocationSearchInput;","map":{"version":3,"names":["React","useState","useRef","useLoadScript","Autocomplete","jsx","_jsx","libraries","LocationSearchInput","_ref","onSelect","isLoaded","loadError","googleMapsApiKey","process","env","REACT_APP_KEY","address","setAddress","autocompleteRef","onLoad","autocomplete","current","onPlaceChanged","place","getPlace","console","log","geometry","location","formatted_address","latitude","lat","longitude","lng","children","handleKeyDown","e","key","preventDefault","id","type","placeholder","value","onChange","target","onKeyDown","className"],"sources":["/media/giada/OS/Users/Asus/OneDrive - Università degli Studi di Catania/_Università/Web Programming/Web_Programming/progetto/server/src/src/content/LocationSearchInput.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useLoadScript, Autocomplete } from '@react-google-maps/api';\n\nconst libraries = ['places'];\n\nfunction LocationSearchInput({ onSelect }) {\n    const { isLoaded, loadError } = useLoadScript({\n        googleMapsApiKey: process.env.REACT_APP_KEY, \n        libraries,\n    });\n\n    const [address, setAddress] = useState('');\n    const autocompleteRef = useRef(null);\n\n    const onLoad = (autocomplete) => {\n        autocompleteRef.current = autocomplete;\n    };\n\n    const onPlaceChanged = () => {\n        if (autocompleteRef.current !== null) {\n            const place = autocompleteRef.current.getPlace();\n            console.log('Place Object:', place); \n\n            // Verifica che place e place.geometry esistano\n            if (place && place.geometry && place.geometry.location) {\n                const location = place.geometry.location;\n                setAddress(place.formatted_address);\n\n                onSelect({\n                    location: place.formatted_address,\n                    latitude: location.lat(),\n                    longitude: location.lng(),\n                });\n            } else {\n                console.log('Place or place.geometry is not defined!');\n                onSelect({\n                    location: '',\n                    latitude: '',\n                    longitude: '',\n                });\n                return <div>Error founding place</div>;\n            }\n        } else {\n            console.log('Autocomplete is not loaded yet!');\n        }\n    };\n\n    const handleKeyDown = (e) => {\n        if (e.key === 'Enter') {\n            e.preventDefault(); // Previene l'invio del form con il tasto Invio\n        }\n    };\n\n    if (loadError) {\n        return <div>Error loading maps</div>;\n    }\n\n    if (!isLoaded) {\n        return <div>Loading Maps...</div>;\n    }\n\n    return (\n        <Autocomplete onLoad={onLoad} onPlaceChanged={onPlaceChanged}>\n            <input\n                id=\"place\"\n                type=\"text\"\n                placeholder=\"Cerca il luogo...\"\n                value={address}\n                onChange={(e) => setAddress(e.target.value)}\n                onKeyDown={handleKeyDown}\n                className=\"form-control\"\n            />\n        </Autocomplete>\n    );\n}\n\nexport default LocationSearchInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}