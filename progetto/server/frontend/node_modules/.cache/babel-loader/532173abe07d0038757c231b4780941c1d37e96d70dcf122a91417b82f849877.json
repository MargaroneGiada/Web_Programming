{"ast":null,"code":"var _jsxFileName = \"/media/giada/OS/Users/Asus/OneDrive - Universit\\xE0 degli Studi di Catania/_Universit\\xE0/Web Programming/Progetto/progetto/client/src/content/Mappa.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { GoogleMap, Marker, InfoWindow } from '@react-google-maps/api';\nimport Navbar from './Navbar';\nimport Footer from './Footer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mapContainerStyle = {\n  height: '650px',\n  width: '100%'\n};\nconst center = {\n  lat: 37.51136,\n  lng: 15.08709\n};\nfunction Mappa() {\n  _s();\n  const [markers, setMarkers] = useState([]);\n  const [selectedMarker, setSelectedMarker] = useState(null);\n  const navigate = useNavigate();\n  const key = API_KEY;\n  useEffect(() => {\n    const fetchMarkers = async () => {\n      try {\n        const response = await axios.get('/api/events/markers', {\n          headers: {\n            authorization: sessionStorage.getItem('token')\n          }\n        });\n        console.log('API Response:', response.data);\n        setMarkers(response.data);\n      } catch (error) {\n        console.error('Error fetching marker data:', error);\n      }\n    };\n    fetchMarkers();\n  }, []);\n  const handleEventClick = eventId => {\n    navigate(`/evento?id=${eventId}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Mappa justify-content-center fullpage\",\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-5 shadow map\",\n      children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n        mapContainerStyle: mapContainerStyle,\n        center: center,\n        zoom: 15,\n        children: [markers.length > 0 && markers.map((marker, index) => /*#__PURE__*/_jsxDEV(Marker, {\n          position: {\n            lat: marker.latitude,\n            lng: marker.longitude\n          },\n          onClick: () => setSelectedMarker(marker),\n          icon: {\n            url: '/assets/img/logoNuovo.png',\n            // URL dell'icona\n            scaledSize: new window.google.maps.Size(40, 40) // Opzionale: dimensioni personalizzate dell'icona\n          }\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }, this)), selectedMarker && /*#__PURE__*/_jsxDEV(InfoWindow, {\n          position: {\n            lat: selectedMarker.latitude,\n            lng: selectedMarker.longitude\n          },\n          onCloseClick: () => setSelectedMarker(null),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              onClick: () => handleEventClick(selectedMarker._id),\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"text-primary fw-bold\",\n                children: selectedMarker.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-dark\",\n                children: selectedMarker.location\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-dark\",\n                children: new Date(selectedMarker.date).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n}\n_s(Mappa, \"uHABTfCb3k2Y3h0HBTAQtVvExeg=\", false, function () {\n  return [useNavigate];\n});\n_c = Mappa;\nexport default Mappa;\nvar _c;\n$RefreshReg$(_c, \"Mappa\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","GoogleMap","Marker","InfoWindow","Navbar","Footer","jsxDEV","_jsxDEV","mapContainerStyle","height","width","center","lat","lng","Mappa","_s","markers","setMarkers","selectedMarker","setSelectedMarker","navigate","key","API_KEY","fetchMarkers","response","get","headers","authorization","sessionStorage","getItem","console","log","data","error","handleEventClick","eventId","className","children","fileName","_jsxFileName","lineNumber","columnNumber","zoom","length","map","marker","index","position","latitude","longitude","onClick","icon","url","scaledSize","window","google","maps","Size","onCloseClick","_id","name","location","Date","date","toLocaleDateString","_c","$RefreshReg$"],"sources":["/media/giada/OS/Users/Asus/OneDrive - Università degli Studi di Catania/_Università/Web Programming/Progetto/progetto/client/src/content/Mappa.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { GoogleMap, Marker, InfoWindow } from '@react-google-maps/api';\nimport Navbar from './Navbar';\nimport Footer from './Footer';\n\nconst mapContainerStyle = {\n    height: '650px',\n    width: '100%',\n};\n\nconst center = {\n    lat: 37.51136,\n    lng: 15.08709,\n};\n\nfunction Mappa() {\n    const [markers, setMarkers] = useState([]);\n    const [selectedMarker, setSelectedMarker] = useState(null);\n\n    const navigate = useNavigate();\n    const key = API_KEY;\n\n    useEffect(() => {\n        const fetchMarkers = async () => {\n            try {\n                const response = await axios.get('/api/events/markers', {\n                    headers: { authorization: sessionStorage.getItem('token') }\n                });\n                console.log('API Response:', response.data);\n                setMarkers(response.data);\n            } catch (error) {\n                console.error('Error fetching marker data:', error);\n            }\n        };\n\n        fetchMarkers();\n    }, []);\n\n    const handleEventClick = (eventId) => {\n        navigate(`/evento?id=${eventId}`);\n    };\n\n    return (\n        <div className=\"Mappa justify-content-center fullpage\">\n            <Navbar />\n            <div className='m-5 shadow map'>\n                <GoogleMap\n                    mapContainerStyle={mapContainerStyle}\n                    center={center}\n                    zoom={15}\n                >\n                    {markers.length > 0 && markers.map((marker, index) => (\n                        <Marker\n                            key={index}\n                            position={{ lat: marker.latitude, lng: marker.longitude }}\n                            onClick={() => setSelectedMarker(marker)}\n                            icon={{\n                                url: '/assets/img/logoNuovo.png', // URL dell'icona\n                                scaledSize: new window.google.maps.Size(40, 40) // Opzionale: dimensioni personalizzate dell'icona\n                            }}\n                        />\n                    ))}\n\n                    {selectedMarker && (\n                        <InfoWindow\n                            position={{ lat: selectedMarker.latitude, lng: selectedMarker.longitude }}\n                            onCloseClick={() => setSelectedMarker(null)}\n                        >\n                            <div>\n                                <a onClick={() => handleEventClick(selectedMarker._id)}>\n                                    <h5 className='text-primary fw-bold'>{selectedMarker.name}</h5>\n                                    <p className='text-dark'>{selectedMarker.location}</p>\n                                    <p className='text-dark'>{new Date(selectedMarker.date).toLocaleDateString()}</p>\n                                </a>\n                            </div>\n                        </InfoWindow>\n                    )}\n                </GoogleMap>\n            </div>\n\n            <Footer />\n        </div>\n    );\n}\n\nexport default Mappa;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}