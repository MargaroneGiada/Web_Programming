{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import Navbar from'./Navbar';import Footer from'./Footer';import{jsx as _jsx}from\"react/jsx-runtime\";function Homepage(){const[user,setUser]=useState(null);const[events,setEvents]=useState([]);const navigate=useNavigate();useEffect(()=>{const token=sessionStorage.getItem('token');if(!token){navigate('/login');}else{axios.get('/api/auth/verify',{headers:{authorization:token}}).then(response=>{if(response.status!==200){navigate('/login');}else{setUser(response.data.user);fetchFutureEvents(response.data.user);}}).catch(error=>{console.error('Verification error:',error);navigate('/login');});}},[navigate]);const fetchFutureEvents=async userId=>{await axios.get('/api/events/futureEvents',{headers:{authorization:sessionStorage.getItem('token')},params:{userId:userId}}).then(response=>{setEvents(response.data||[]);}).catch(error=>{console.error('Error fetching events:',error);});};const handleEventClick=eventId=>{navigate(`/evento?id=${eventId}`);};// if (!user) {\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center align-items-center min-vh-100 bg-dark\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:/*#__PURE__*/_jsx(\"div\",{})})});// }\n// return (\n//   <div className=\"d-flex flex-column min-vh-100 bg-dark text-white\">\n//     <Navbar />\n//     <div className=\"container text-center mt-5\">\n//       <h1 className=\"display-4 text-warning\">Ciao {user.username}!</h1>\n//     </div>\n//     <div className=\"container mt-5\">\n//       <h2 className=\"text-center text-warning\">I tuoi eventi futuri</h2>\n//       <div className=\"row justify-content-start\">\n//         {events.length > 0 ? (\n//           events.map((event) => {\n//             const data = new Date(event.date);\n//             return (\n//               <div\n//                 key={event._id}\n//                 className=\"col-lg-4 col-md-6 mb-4\"\n//                 onClick={() => handleEventClick(event._id)}\n//               >\n//                 <div className=\"card bg-black text-light h-100\">\n//                   <figure className=\"card-img-top mb-0 overflow-hidden bsb-overlay-hover\">\n//                     <img\n//                       src={\n//                         event.images.length > 0\n//                           ? event.images[0]\n//                           : '/assets/img/logoNuovo.png'\n//                       }\n//                       className=\"\"\n//                       alt={event.name}\n//                       style={{ height: '200px', objectFit: 'cover' }}\n//                     />\n//                     <figcaption>\n//                       <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" className=\"bi bi-eye text-white bsb-hover-fadeInLeft\" viewBox=\"0 0 16 16\">\n//                         <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\" />\n//                         <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\" />\n//                       </svg>\n//                       <h4 className=\"h6 text-white bsb-hover-fadeInRight mt-2\">Scopri evento</h4>\n//                     </figcaption>\n//                   </figure>\n//                   <div className=\"card-body row d-flex \">\n//                     <h5 className=\"card-title col-12 text-warning mb-5\">{event.name}</h5>\n//                     <p className=\" col-6\">\n//                       <span className=\"badge bg-info\">{event.category}</span>\n//                     </p>\n//                     <p className=\"text-end text-warning col-6\">\n//                       {data.toLocaleDateString('it-IT', {\n//                         year: 'numeric',\n//                         month: 'numeric',\n//                         day: 'numeric',\n//                       })}\n//                       ,{' '}\n//                       {data.toLocaleTimeString('it-IT', {\n//                         hour: '2-digit',\n//                         minute: '2-digit',\n//                       })}\n//                     </p>\n//                   </div>\n//                 </div>\n//               </div>\n//             );\n//           })\n//         ) : (\n//           <div className=\"col-12\">\n//             <p className=\"text-center text-muted\">\n//               Nessun evento in programma\n//             </p>\n//           </div>\n//         )}\n//       </div>\n//     </div>\n//     <Footer />\n//   </div>\n// );\n}export default Homepage;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Navbar","Footer","jsx","_jsx","Homepage","user","setUser","events","setEvents","navigate","token","sessionStorage","getItem","get","headers","authorization","then","response","status","data","fetchFutureEvents","catch","error","console","userId","params","handleEventClick","eventId","className","children"],"sources":["/media/giada/OS/Users/Asus/OneDrive - Università degli Studi di Catania/_Università/Web Programming/Web_Programming/progetto/server/frontend/src/content/Homepage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport Navbar from './Navbar';\nimport Footer from './Footer';\n\nfunction Homepage() {\n  const [user, setUser] = useState(null);\n  const [events, setEvents] = useState([]);\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const token = sessionStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n    } else {\n      axios\n        .get('/api/auth/verify', { headers: { authorization: token } })\n        .then((response) => {\n          if (response.status !== 200) {\n            navigate('/login');\n          } else {\n            setUser(response.data.user);\n            fetchFutureEvents(response.data.user);\n          }\n        })\n        .catch((error) => {\n          console.error('Verification error:', error);\n          navigate('/login');\n        });\n    }\n  }, [navigate]);\n\n  const fetchFutureEvents = async (userId) => {\n    await axios\n      .get('/api/events/futureEvents', {\n        headers: { authorization: sessionStorage.getItem('token') },\n        params: { userId: userId },\n      })\n      .then((response) => {\n        setEvents(response.data || []);\n      })\n      .catch((error) => {\n        console.error('Error fetching events:', error);\n      });\n  };\n\n  const handleEventClick = (eventId) => {\n    navigate(`/evento?id=${eventId}`);\n  };\n\n  // if (!user) {\n    return (\n      <div className=\"d-flex justify-content-center align-items-center min-vh-100 bg-dark\">\n        <div className=\"loader\">\n          <div></div>\n        </div>\n      </div>\n    );\n  // }\n\n  // return (\n  //   <div className=\"d-flex flex-column min-vh-100 bg-dark text-white\">\n  //     <Navbar />\n\n  //     <div className=\"container text-center mt-5\">\n  //       <h1 className=\"display-4 text-warning\">Ciao {user.username}!</h1>\n  //     </div>\n\n  //     <div className=\"container mt-5\">\n  //       <h2 className=\"text-center text-warning\">I tuoi eventi futuri</h2>\n  //       <div className=\"row justify-content-start\">\n  //         {events.length > 0 ? (\n  //           events.map((event) => {\n  //             const data = new Date(event.date);\n  //             return (\n  //               <div\n  //                 key={event._id}\n  //                 className=\"col-lg-4 col-md-6 mb-4\"\n  //                 onClick={() => handleEventClick(event._id)}\n  //               >\n  //                 <div className=\"card bg-black text-light h-100\">\n  //                   <figure className=\"card-img-top mb-0 overflow-hidden bsb-overlay-hover\">\n  //                     <img\n  //                       src={\n  //                         event.images.length > 0\n  //                           ? event.images[0]\n  //                           : '/assets/img/logoNuovo.png'\n  //                       }\n  //                       className=\"\"\n  //                       alt={event.name}\n  //                       style={{ height: '200px', objectFit: 'cover' }}\n  //                     />\n  //                     <figcaption>\n  //                       <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" className=\"bi bi-eye text-white bsb-hover-fadeInLeft\" viewBox=\"0 0 16 16\">\n  //                         <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\" />\n  //                         <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\" />\n  //                       </svg>\n  //                       <h4 className=\"h6 text-white bsb-hover-fadeInRight mt-2\">Scopri evento</h4>\n  //                     </figcaption>\n  //                   </figure>\n  //                   <div className=\"card-body row d-flex \">\n  //                     <h5 className=\"card-title col-12 text-warning mb-5\">{event.name}</h5>\n  //                     <p className=\" col-6\">\n  //                       <span className=\"badge bg-info\">{event.category}</span>\n  //                     </p>\n  //                     <p className=\"text-end text-warning col-6\">\n  //                       {data.toLocaleDateString('it-IT', {\n  //                         year: 'numeric',\n  //                         month: 'numeric',\n  //                         day: 'numeric',\n  //                       })}\n  //                       ,{' '}\n  //                       {data.toLocaleTimeString('it-IT', {\n  //                         hour: '2-digit',\n  //                         minute: '2-digit',\n  //                       })}\n  //                     </p>\n  //                   </div>\n\n  //                 </div>\n  //               </div>\n  //             );\n  //           })\n  //         ) : (\n  //           <div className=\"col-12\">\n  //             <p className=\"text-center text-muted\">\n  //               Nessun evento in programma\n  //             </p>\n  //           </div>\n  //         )}\n  //       </div>\n  //     </div>\n\n  //     <Footer />\n  //   </div>\n  // );\n}\n\nexport default Homepage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,MAAM,KAAM,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9B,QAAS,CAAAC,QAAQA,CAAA,CAAG,CAClB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACW,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAExC,KAAM,CAAAa,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,KAAK,CAAGC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CAC7C,GAAI,CAACF,KAAK,CAAE,CACVD,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,IAAM,CACLX,KAAK,CACFe,GAAG,CAAC,kBAAkB,CAAE,CAAEC,OAAO,CAAE,CAAEC,aAAa,CAAEL,KAAM,CAAE,CAAC,CAAC,CAC9DM,IAAI,CAAEC,QAAQ,EAAK,CAClB,GAAIA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CAC3BT,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,IAAM,CACLH,OAAO,CAACW,QAAQ,CAACE,IAAI,CAACd,IAAI,CAAC,CAC3Be,iBAAiB,CAACH,QAAQ,CAACE,IAAI,CAACd,IAAI,CAAC,CACvC,CACF,CAAC,CAAC,CACDgB,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACD,KAAK,CAAC,qBAAqB,CAAEA,KAAK,CAAC,CAC3Cb,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAAC,CACN,CACF,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAW,iBAAiB,CAAG,KAAO,CAAAI,MAAM,EAAK,CAC1C,KAAM,CAAA1B,KAAK,CACRe,GAAG,CAAC,0BAA0B,CAAE,CAC/BC,OAAO,CAAE,CAAEC,aAAa,CAAEJ,cAAc,CAACC,OAAO,CAAC,OAAO,CAAE,CAAC,CAC3Da,MAAM,CAAE,CAAED,MAAM,CAAEA,MAAO,CAC3B,CAAC,CAAC,CACDR,IAAI,CAAEC,QAAQ,EAAK,CAClBT,SAAS,CAACS,QAAQ,CAACE,IAAI,EAAI,EAAE,CAAC,CAChC,CAAC,CAAC,CACDE,KAAK,CAAEC,KAAK,EAAK,CAChBC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CAAC,CAAC,CACN,CAAC,CAED,KAAM,CAAAI,gBAAgB,CAAIC,OAAO,EAAK,CACpClB,QAAQ,CAAC,cAAckB,OAAO,EAAE,CAAC,CACnC,CAAC,CAED;AACE,mBACExB,IAAA,QAAKyB,SAAS,CAAC,qEAAqE,CAAAC,QAAA,cAClF1B,IAAA,QAAKyB,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACrB1B,IAAA,SAAU,CAAC,CACR,CAAC,CACH,CAAC,CAEV;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACF,CAEA,cAAe,CAAAC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}